# vi: ft=ruby

attrs application_code: 'la_marco_sinatra',
      application_name: 'Sinatra Based Web Framework',
      application_version: '0.0.1'

pull :'la-marco', git: 'git@gitlab.7lime.com:vikkr/la-marco.git',
                  branch: :develop

from :'la-marco' do
  import :full
end

export :route do
  add_gem 'sinatra', '~> 1.4'
  add_gem 'pry-byebug'
  add_gem 'puma'
  add_gem 'rack-test', group: :development
  add_gem 'guard-shell', group: :development
  # add_gem 'guard-puma', group: :development

  copy 'config.ru'
  copy 'config/application.rb'
  copy 'config/environments/*.rb'
  # copy 'config/puma.rb'
  copy 'Guardfile', sync: false
  copy 'lib/tasks/puma.rake'

  execute(after: true) do
    FileUtils.mkdir 'tmp' unless File.exist?('tmp')
  end
end

from('.') do
  import :route
end
